/**
 * Animation Conflict Prevention CSS
 * Fixes flickering and conflicting animations in dashboard
 */

/* ===== DISABLE PROBLEMATIC ANIMATIONS ===== */
/* Disable complex card animations that cause flickering */
.stats-card::before,
.quick-action-card::before,
.welcome-card::after,
.card-particles::after {
    animation: none !important;
    transform: none !important;
}

/* ===== SMOOTH TRANSITIONS ONLY ===== */
/* Replace complex animations with smooth transitions */
.modern-action-card {
    will-change: transform, box-shadow;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
}

.modern-action-card:hover {
    transform: translateY(-4px) translateZ(0);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== PREVENT ANIMATION STACKING ===== */
.stats-value,
.progress-bar,
.trend-up,
.trend-down {
    animation: none !important;
}

/* ===== FORCE GPU ACCELERATION FOR SMOOTH ANIMATIONS ===== */
.dashboard-header,
.welcome-section,
.action-cards-section {
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: auto;
}

/* ===== OPTIMIZE LOADING STATES ===== */
.content-fade-in {
    animation-fill-mode: both;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== DISABLE FLOATING ANIMATIONS ===== */
.card-floating {
    animation: none !important;
    transform: none !important;
}

/* ===== MINIMAL HOVER EFFECTS ===== */
.nav-link:hover {
    transform: none !important;
    animation: none !important;
}

/* ===== PREVENT TRANSFORM CONFLICTS ===== */
.stats-icon:hover {
    transform: scale(1.05) !important;
    animation: none !important;
}

/* ===== SMOOTH TRANSITIONS FOR INTERACTIVE ELEMENTS ===== */
.btn-card-action {
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.nav-link {
    transition: background-color 0.2s ease, color 0.2s ease;
}

/* ===== PREVENT SHIMMER/SWEEP ANIMATIONS ===== */
.card-loading::before,
.stats-trend::before,
.progress-bar::before {
    animation: none !important;
    display: none !important;
}

/* ===== FORCE HARDWARE ACCELERATION ===== */
.modern-dashboard * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* ===== DISABLE COMPLEX GRADIENT ANIMATIONS ===== */
.loading-progress-bar {
    background: linear-gradient(90deg, #6366f1, #8b5cf6, #3b82f6) !important;
    background-size: 100% 100% !important;
    animation: loading-progress-simple 2s ease-in-out infinite !important;
}

@keyframes loading-progress-simple {
    0% { width: 0%; opacity: 0.7; }
    50% { width: 60%; opacity: 1; }
    100% { width: 100%; opacity: 0.7; }
}

/* ===== OPTIMIZE SPINNER ANIMATIONS ===== */
.spinner-circle {
    animation-timing-function: linear !important;
    animation-duration: 1.5s !important;
}

/* ===== PREVENT MULTIPLE TRANSFORM CALLS ===== */
.profile-completion svg circle:last-child {
    transition: stroke-dashoffset 0.5s ease !important;
    animation: none !important;
}

/* ===== STABLE LAYOUT DURING ANIMATIONS ===== */
.dashboard-loading-overlay {
    /* Non-intrusive loading indicator in top-right corner */
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    width: auto !important;
    height: auto !important;
    z-index: 9999 !important;
    pointer-events: none !important;
}

/* ===== PREVENT REFLOW DURING TRANSITIONS ===== */
.modern-action-card,
.welcome-section,
.dashboard-header {
    contain: layout style paint;
}

/* ===== STABLE WAVE ANIMATION ===== */
.minimal-wave {
    animation-duration: 3s !important;
    animation-timing-function: ease-in-out !important;
    animation-iteration-count: infinite !important;
    will-change: transform;
    transform-origin: 70% 70%;
}

/* ===== PREVENT ANIMATION CONFLICTS ON MOBILE ===== */
@media (max-width: 768px) {
    .modern-action-card:hover {
        transform: none !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
    }
    
    .minimal-wave {
        animation-duration: 4s !important;
    }
}

/* ===== HIGH PERFORMANCE MODE ===== */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ===== PREVENT PAINT FLASHING ===== */
.modern-dashboard {
    isolation: isolate;
}

/* ===== CRITICAL RENDERING PATH OPTIMIZATION ===== */
.dashboard-loading-overlay {
    contain: strict;
    content-visibility: auto;
}

/* ===== DISABLE PROBLEMATIC PSEUDO ELEMENTS ===== */
.welcome-card::before {
    display: none !important;
}

.quick-action-card .icon-wrapper::before {
    display: none !important;
}

/* ===== FORCE REPAINT OPTIMIZATION ===== */
.content-fade-in {
    backface-visibility: hidden;
    perspective: 1000px;
}

/* ===== PREVENT LAYOUT THRASHING ===== */
.loading-text,
.loading-subtitle {
    will-change: auto;
}

/* ===== STABLE HOVER STATES ===== */
.modern-action-card {
    transition-property: transform, box-shadow;
    transition-duration: 0.3s;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* ===== PERFORMANCE MONITORING ===== */
@supports (content-visibility: auto) {
    .action-cards-section {
        content-visibility: auto;
        contain-intrinsic-size: 0 400px;
    }
}
