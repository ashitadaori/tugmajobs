$schema: https://azuremlschemas.azureedge.net/latest/managedOnlineDeployment.schema.json

name: kmeans-clustering-deployment
endpoint_name: kmeans-clustering-endpoint

# Scoring script configuration
code_configuration:
  code: ./
  scoring_script: score.py

# Environment configuration
environment:
  name: kmeans-clustering-env
  version: 1
  conda_file: environment.yml
  image: mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04:latest

# Instance configuration
instance_type: Standard_DS2_v2
instance_count: 1

# Request settings
request_settings:
  request_timeout_ms: 60000
  max_concurrent_requests_per_instance: 10
  max_queue_wait_ms: 60000

# Liveness probe
liveness_probe:
  initial_delay: 60
  period: 60
  failure_threshold: 30
  timeout: 30

# Readiness probe
readiness_probe:
  initial_delay: 60
  period: 60
  failure_threshold: 30
  timeout: 30

# Scale settings
scale_settings:
  type: default
